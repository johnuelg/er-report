---
title: "Monthly Emergency Room (ER) Report"
subtitle: "This report analyzes the emergency room operations at Taif Children's Hospital for the month of September 2024. The focus of this month's report is on understanding peak hours of patient visits, volume, average wait times, triage levels and operational metrics. Recommendations will be provided based on these findings to help enhance patient care and operational efficiency."
format:
  lumo-html: 
    logo: "logo.png"                                     # Optional. Path to a logo displayed above the title
    primary-color: "#b5cef7"
    self-contained: true
    is-particlejs-enabled: true                          # Optional: display interactive particles in the document header background
author: Joan Jimenez
date: last-modified
---




## Introduction

This comprehensive report examines emergency department (ER) operations, focusing on critical key performance indicators (KPIs) that reflect the efficiency and effectiveness of patient care from triage to treatment.It analyzes patient visit metrics to measure overall demand and examines the time from **door to doctor**, providing insights into initial response times. The report also looks into the duration from **doctor to decision**, highlighting the speed at which healthcare providers can evaluate and decide on necessary interventions. For more information visit <a href='https://taifchildrenhospital/er'>Emergency Room (ER)

While the default Quarto appearance **looks great**, there are [a few tweaks](https://www.productive-r-workflow.com/quarto-tricks) I always apply to elevate the report even further. Rather than manually adding them each time, I bundled everything into a custom format called [lumo](https://www.productive-r-workflow.com/r/bonus/lumo-quarto-template).


::: {.column-margin}

Btw, you can learn how to master Quarto thanks to my online course: [Productive R Workflow](https://www.productive-r-workflow.com)

:::


This document aims at showcasing how versatile the lumo format is. With a few tweaks, I made it **fit the brand** of a specific company.


## Patients Visits

Analyze patterns in patient visits over time to identify peak hours, seasonal variations, and the overall demand for emergency services.By identifying trends and patterns in patient visits, we aim to optimize the quality of care and improve operational effectiveness. 

Key Metrics:

Key Metrics
Total Patient Visits: 12,500
Average Daily Visits: 139
Peak Hour: 5 PM ‚Äì 8 PM
Percentage of Non-Urgent Visits: 30%
Percentage of Urgent Visits: 70%
Average Wait Time (Door to Doctor): 20 minutes


```{r, warning=F, message=F, echo=FALSE}
library(tidyverse) 
library(hrbrthemes) # <1>
library(viridis) # <2>
library(patchwork) 
```



:::{.callout}
By the way, you should open the code chunk that is folded above. ‚¨ÜÔ∏è
There is a little stunning surprise on its right hand side.
:::


::: {.panel-tabset .nav-pills}

## Patients Volume

This is a good old scatterplot of the iris dataset. If you want to learn more about how to make graphs in R, visit my [R graph gallery](https://www.r-graph-gallery.com)!


```{r, fig.align='center', fig.width=6, fig.height=6, fig.align='left', echo=FALSE}

```


## Urgency



<iframe src="img/infographics/patient urgency/index.html" width="100%" height="300px" style="border:none;"></iframe>





## CTAS Level

You can also make a [boxplot](https://r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2.html), but please do not hide the underlying distribution! This is widely explain in my data-to-viz.com project in case you're not convinced üòã. Check the next tab to get convinced!

<iframe src="interactive/ctas_month_waffle.html" width="100%" height="600px" style="border:none;"></iframe>

## 24 Hour Clock
See what's happening now that the individual data points are visible! Would be a shame to miss this.

<iframe src="interactive/24clocktime.html" width="100%" height="600px" style="border:none;"></iframe>


:::


## ER Traffic

For a complete list of features, [visit the documentation](https://www.productive-r-workflow.com/r/bonus/lumo-quarto-template)!

Oh and since we're here, did you know you can easily include a full width interactive map with `leaflet` in a quarto doc? üòç
```{r}
#| column: screen
#| out-width: 100%

# Load the library.
library(leaflet)

# Make a map
leaflet() %>%
  addTiles() %>% # Add default OpenStreetMap map tiles
  addMarkers(lng = 174.768, lat = -36.852, popup = "The birthplace of R")
```




## Interactive table

It is very easy to insert an interactive table in your document thanks to the `DT` package. The output allows to filter rows, search for something and sort using a specific columns!

Install the library with `install.packages("DT")`. Then, just pass a dataframe to the `datatable()` function to get a stunning interactive output!

```{r}
library(DT)
data(iris)

# Make a table
datatable(iris, filter = "top")
```

::: {.column-margin}
<br/><br/><br/><br/><br/><br/>
I've added a bit of CSS to make the font smaller on DT tables by the way üôÇ
:::



## A grey section

::: {.cell .page-columns .page-full .column-screen .grey-section}
It's always good to have a grey section. Makes the document breath a bit. I've added a little utility class in `Lumo` to make sure you can make sections like this very easily. Check the [documentation](https://www.productive-r-workflow.com/r/bonus/lumo-quarto-template)!

Let's use this space to render a little equation:

$$
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$
:::





## Quarto Tricks

`Lumo` is a great format, but to get the most out of it, you‚Äôll need to master a few Quarto tricks!

The good news? I‚Äôve compiled my 30+ favorite tips [in one place](https://www.productive-r-workflow.com/quarto-tricks). Just spend 30 minutes, and you'll be up to speed with all of them!

<hr/>

For example, if you're creating multiple plots, each highlighting different aspects of your dataset, consider using *pills* to organize them!


::: {.panel-tabset .nav-pills}

## Scatterplot

This is a good old scatterplot of the iris dataset. If you want to learn more about how to make graphs in R, visit my [R graph gallery](https://www.r-graph-gallery.com)!


```{r, fig.align='center', fig.width=6, fig.height=6, fig.align='left'}
ggplot(iris, aes(x=Sepal.Length, y=Sepal.Width, color=Species)) + 
    geom_point() +
    theme_brand() +
    scale_color_brand() +
    labs(
      title = "Sepal Length vs Sepal Width",
      subtitle = "Relationship between 2 numerical variables.",
      caption = "Author: Yan Holtz\nData: coming from the batch #44 on the 3rd of October"
    ) 
```

## Boxplot

You can also make a [boxplot](https://r-graph-gallery.com/89-box-and-scatter-plot-with-ggplot2.html), but please do not hide the underlying distribution! This is widely explain in my data-to-viz.com project in case you're not convinced üòã. Check the next tab to get convinced!

```{r, fig.align='center', fig.width=6, fig.height=6, fig.align='left'}
# create a dataset
data <- data.frame(
  name=c( rep("A",500), rep("B",500), rep("B",500), rep("C",20), rep('D', 100)  ),
  value=c( rnorm(500, 10, 5), rnorm(500, 13, 1), rnorm(500, 18, 1), rnorm(20, 25, 4), rnorm(100, 12, 1) )
)

# Plot
data %>%
  ggplot( aes(x=name, y=value, fill=name)) +
    geom_boxplot() +
    theme(
      legend.position="none",
      plot.title = element_text(size=11)
    ) +
    xlab("") +
    theme_brand() +
    scale_color_brand() +
    labs(
      title = "A boxplot that hides the underlying distribution",
      subtitle = "Never hide the underlying samples on a boxplot. You never know what's behind!? (check the next tab: with jittering)",
      caption = "Author: Yan Holtz\nData: coming from the batch #44 on the 3rd of October"
    ) 
```

## Jittering
See what's happening now that the individual data points are visible! Would be a shame to miss this.

```{r, fig.align='center', fig.width=6, fig.height=6, fig.align='left'}
data %>%
  ggplot( aes(x=name, y=value, fill=name)) +
    geom_boxplot() +
    geom_jitter(color="black", size=0.4, alpha=0.9) +
    theme(
      legend.position="none",
      plot.title = element_text(size=11)
    ) +
    xlab("") +
    theme_brand() +
    scale_color_brand() +
    labs(
      title = "A boxplot with jitter",
      subtitle = "This boxplot does NOT hide the underlying distribution.\nIt is much more powerful and reveals some massive differences between groups!",
      caption = "Author: Yan Holtz\nData: coming from the batch #44 on the 3rd of October"
    ) 
```


:::




## More Information

Learn how to use and how to customize `Lumo` [here](https://www.productive-r-workflow.com/r/bonus/lumo-quarto-template).







## Session Info

When creating a Quarto document, it's a good practice to include details about your **working environment**. 

This is easy to do‚Äîjust call `sessionInfo()`, and it will print out all your R and package versions. This simple step greatly enhances **reproducibility**.


<button type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" >Session Information</button><div id="collapseOne" class="accordion-collapse collapse"><div>


```{r}
sessionInfo()
```

</div></div>


